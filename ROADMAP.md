# snapshot-runner Roadmap

## ✅ 実装済み機能 (v1.0.0)

### 1. 特定テストの検出機能
- ✅ カーソル位置のテストを検出して更新 (`:SnapshotTest`)
- ✅ 全テストのスナップショット更新 (`:Snapshot`, `:SnapshotAll`)
- ✅ テストファイル自動認識 (.test.js, .spec.ts等)

### 2. パッケージマネージャー対応
- ✅ npm/yarn/pnpm自動検出
- ✅ ロックファイルに基づく適切なコマンド実行

### 3. エラーハンドリング
- ✅ テストファイル以外での警告表示
- ✅ テストが見つからない場合の警告
- ✅ コマンド実行失敗時の詳細エラー表示

## 🚀 今後の実装予定

### 1. 非同期実行とプログレス表示 (優先度: 高)
- **目的**: 大きなテストでもUIをブロックしない
- **実装案**:
  - Denopsのジョブ機能で非同期実行
  - 実行中のプログレス表示
  - 実行時間の計測と表示
  - キャンセル機能 (Ctrl+C)

### 2. 設定オプション (優先度: 高)
- **目的**: 様々なプロジェクト構成に対応
- **実装案**:
  ```vim
  let g:snapshot_runner_config = {
    \ 'test_command': 'test:update-snapshots',
    \ 'test_runner': 'auto', " auto/jest/vitest
    \ 'show_notifications': v:true,
    \ 'auto_save_before_run': v:true,
    \ 'timeout': 30000
    \ }
  ```
- カスタムテストコマンドの設定
- テストランナーの明示的指定
- 通知表示のON/OFF

### 3. Visual mode対応 (優先度: 中)
- **目的**: 複数テストの一括更新
- **実装案**:
  - Visual modeで選択した範囲内のテストを検出
  - `:'<,'>SnapshotTests` コマンド
  - describe ブロック全体の選択対応

### 4. 実行結果の詳細表示 (優先度: 中)
- **目的**: 更新内容の可視化
- **実装案**:
  - 更新されたスナップショット数
  - 更新されたファイルパス一覧
  - 削除された古いスナップショットの通知
  - QuickFixリストへの結果出力

### 5. Telescope統合 (優先度: 中)
- **目的**: テストの検索と選択的実行
- **実装案**:
  - `:Telescope snapshot_runner tests` でテスト一覧表示
  - ファジー検索でテストを絞り込み
  - 複数選択して一括実行
  - プレビューでテストコード表示

### 6. スナップショットdiff表示 (優先度: 低)
- **目的**: 更新前の確認
- **実装案**:
  - `:SnapshotDiff` で差分表示
  - 更新前後の比較ビュー
  - 部分的な更新の承認/拒否

### 7. テストウォッチモード (優先度: 低)
- **目的**: ファイル保存時の自動実行
- **実装案**:
  - `:SnapshotWatch` でウォッチモード開始
  - ファイル変更検知で関連テストのみ実行
  - 結果のインライン表示

## 開発方針
- 全機能をTDD（テスト駆動開発）で実装
- Denops APIを最大限活用した高性能実装
- ユーザビリティを重視したエラーメッセージ
- 他のNeovimプラグインとの連携を考慮